data$R5[data$R500 > 90] <- 95
data$R1<-data$R1000
data$R1[data$R1000 > 90] <- 95
data$R2<-data$R2000
data$R2[data$R2000 > 90] <- 95
data$R4<-data$R4000
data$R4[data$R4000 > 90] <- 95
#At 8000Hz
data$L8<-data$L8000
data$L8[data$L8000 > 90] <- 95
data$R8<-data$R8000
data$R8[data$R8000 > 90] <- 95
# Calculating PTA in each ear
#colnames(data[,1000:1021])
data$LPTA <- apply(data[,c('L5','L1','L2','L4')], 1, mean, na.rm=T)
data$RPTA <- apply(data[,c('R5','R1','R2','R4')], 1, mean, na.rm=T)
data$LPTA[is.nan(data$LPTA)]  <- NA
data$RPTA[is.nan(data$RPTA)]  <- NA
#Now can calculate BEPTA (PTA in better ear)
data$BEPTA<- ifelse((!is.na(data$RPTA) & data$RPTA <= data$LPTA) | is.na(data$LPTA),
data$RPTA, data$LPTA)
data$hcat<- cut(data$BEPTA,
breaks=c(-Inf, 25, 40, 55, Inf),
labels=c("1", "2", "3","4"))
# Convert hcat into an ordered factor... So for the lables: 1= below 25, 2 is from 25-40, #3 = 40-55, # 55 and greater?
data$hcat <- factor(data$hcat,levels=c(1:4),ordered=TRUE)
return(data)
}
AUS_data<- read.csv("C:/Users/Michael Lee/Documents/GitHub/eHearing/AF_AU_UNI_Survey+HT_12.13.17.csv", header=T, na.strings=c("#NULL!",'90NR'))
CAN_data<- read.csv("C:/Users/Michael Lee/Documents/GitHub/eHearing/AF_CAN_InPerson_AllSubs_Survey+Audio_CLEAN_07.25.2018.csv", header=T, na.strings=c("#NULL!",'90NR'))
AUS_data<- read.csv("C:/Users/mkeomec/Documents/GitHub/eHearing/AF_AU_UNI_Survey+HT_12.13.17.csv", header=T, na.strings=c("#NULL!",'90NR'))
CAN_data<- read.csv("C:/Users/mkeomec/Documents/GitHub/eHearing/AF_CAN_InPerson_AllSubs_Survey+Audio_CLEAN_07.25.2018.csv", header=T, na.strings=c("#NULL!",'90NR'))
UK_data<- read.csv("C:/Users/mkeomec/Documents/GitHub/eHearing/AF_UK_InPerson_AllSurvey+AllAudios_CLEAN_7.26.18.csv", header=T, na.strings=c("#NULL!",'90NR'))
US_data<- read.csv("C:/Users/mkeomec/Documents/GitHub/eHearing/AF_US_UNI_AllSubsSurvey+Audio_2.20.18.csv", header=T, na.strings=c("#NULL!",'90NR'))
UK_data <- data_prep(UK_data)
CAN_data <- data_prep(CAN_data)
AUS_data <- data_prep(AUS_data)
US_data <- data_prep(US_data)
AUS_data$country <- 'AUS'
US_data$country <- 'US'
UK_data$country <- 'UK'
CAN_data$country <- 'CAN'
global_data <- rbind.fill(AUS_data,CAN_data)
global_data <- rbind.fill(global_data,UK_data)
global_data <- rbind.fill(global_data,US_data)
ifelse(global_data$q0054=="#NULL!",ifelse(global_data$q0104=="#NULL!",global_data$provider <- global_data$q0157,global_data$provider <- global_data$q0104),global_data$provider <- global_data$q0054)
#Code for summing tables together in the case of comparing answers across the  questions that appear again on separate pathways
global_data$provider <- ifelse(is.na(global_data$q0054),ifelse(is.na(global_data$q0104),global_data$q0157,global_data$q0104),global_data$q0054)
global_data$locationcon <- ifelse(is.na(global_data$q0056_0001),ifelse(is.na(global_data$q0108_0001),global_data$q0161_0001,global_data$q0108_0001),global_data$q0056_0001)
#94-132 5 ways reasons that encourage OBJ. Sum that tables together across the different HL cats. Since there are multiple choices they can select, will repeat the same code for each question and generate multiple tables.
global_data$hearbetter <- ifelse(is.na(global_data$q0079_0001),ifelse(is.na(global_data$q0133_0001),global_data$q0186_0001,global_data$q0133_0001),global_data$q0079_0001)
#assigns NAs to 0 value
global_data$hearbetter[is.na(global_data$hearbetter)] <- 0
global_data$active <- ifelse(is.na(global_data$q0079_0002),ifelse(is.na(global_data$q0133_0002),global_data$q0186_0002,global_data$q0133_0002),global_data$q0079_0002)
global_data$active[is.na(global_data$active)] <- 0
global_data$hope <- ifelse(is.na(global_data$q0079_0003),ifelse(is.na(global_data$q0133_0003),global_data$q0186_0003,global_data$q0133_0003),global_data$q0079_0003)
global_data$hope[is.na(global_data$hope)] <- 0
global_data$friends <- ifelse(is.na(global_data$q0079_0004),ifelse(is.na(global_data$q0133_0004),global_data$q0186_0004,global_data$q0133_0004),global_data$q0079_0004)
global_data$friends[is.na(global_data$friends)] <- 0
global_data$trust <- ifelse(is.na(global_data$q0079_0005),ifelse(is.na(global_data$q0133_0005),global_data$q0186_0005,global_data$q0133_0005),global_data$q0079_0005)
global_data$trust[is.na(global_data$trust)] <- 0
global_data$cost <- ifelse(is.na(global_data$q0079_0006),ifelse(is.na(global_data$q0133_0006),global_data$q0186_0006,global_data$q0133_0006),global_data$q0079_0006)
global_data$cost[is.na(global_data$cost)] <- 0
global_data$worth <- ifelse(is.na(global_data$q0079_0007),ifelse(is.na(global_data$q0133_0007),global_data$q0186_0007,global_data$q0133_0007),global_data$q0079_0007)
global_data$worth[is.na(global_data$worth)] <- 0
global_data$stigma <- ifelse(is.na(global_data$q0079_0008),ifelse(is.na(global_data$q0133_0008),global_data$q0186_0008,global_data$q0133_0008),global_data$q0079_0008)
global_data$stigma[is.na(global_data$stigma)] <- 0
global_data$access <- ifelse(is.na(global_data$q0079_0009),ifelse(is.na(global_data$q0133_0009),global_data$q0186_0009,global_data$q0133_0009),global_data$q0079_0009)
global_data$access[is.na(global_data$access)] <- 0
global_data$age <- ifelse(is.na(global_data$q0079_0010),ifelse(is.na(global_data$q0133_0010),global_data$q0186_0010,global_data$q0133_0010),global_data$q0079_0010)
global_data$age[is.na(global_data$age)] <- 0
global_data$rec <- ifelse(is.na(global_data$q0079_0011),ifelse(is.na(global_data$q0133_0011),global_data$q0186_0011,global_data$q0133_0011),global_data$q0079_0011)
global_data$rec[is.na(global_data$rec)] <- 0
global_data$work <- ifelse(is.na(global_data$q0079_0012),ifelse(is.na(global_data$q0133_0012),global_data$q0186_0012,global_data$q0133_0012),global_data$q0079_0012)
global_data$work[is.na(global_data$work)] <- 0
global_data$style <- ifelse(is.na(global_data$q0079_0013),ifelse(is.na(global_data$q0133_0013),global_data$q0186_0013,global_data$q0133_0013),global_data$q0079_0013)
global_data$style[is.na(global_data$style)] <- 0
#135-169 5 reasons to discourage you
global_data$dhealth <- ifelse(is.na(global_data$q0080_0001),ifelse(is.na(global_data$q0134_0001),global_data$q0187_0001,global_data$q0134_0001),global_data$q0080_0001)
global_data$dhealth[is.na(global_data$dhealth)] <- 0
global_data$dcost <- ifelse(is.na(global_data$q0080_0002),ifelse(is.na(global_data$q0134_0002),global_data$q0187_0002,global_data$q0134_0002),global_data$q0080_0002)
global_data$dcost[is.na(global_data$dcost)] <- 0
global_data$dworth <- ifelse(is.na(global_data$q0080_0003),ifelse(is.na(global_data$q0134_0003),global_data$q0187_0003,global_data$q0134_0003),global_data$q0080_0003)
global_data$dworth[is.na(global_data$dworth)] <- 0
global_data$dhope <- ifelse(is.na(global_data$q0080_0004),ifelse(is.na(global_data$q0134_0004),global_data$q0187_0004,global_data$q0134_0004),global_data$q0080_0004)
global_data$dhope[is.na(global_data$dhope)] <- 0
global_data$dtrust <- ifelse(is.na(global_data$q0080_0005),ifelse(is.na(global_data$q0134_0005),global_data$q0187_0005,global_data$q0134_0005),global_data$q0080_0005)
global_data$dtrust[is.na(global_data$dtrust)] <- 0
global_data$dold <- ifelse(is.na(global_data$q0080_0006),ifelse(is.na(global_data$q0134_0006),global_data$q0187_0006,global_data$q0134_0006),global_data$q0080_0006)
global_data$dold[is.na(global_data$dold)] <- 0
global_data$dHAold <- ifelse(is.na(global_data$q0080_0007),ifelse(is.na(global_data$q0134_0007),global_data$q0187_0007,global_data$q0134_0007),global_data$q0080_0007)
global_data$dHAold[is.na(global_data$dHAold)] <- 0
global_data$dstigma <- ifelse(is.na(global_data$q0080_0008),ifelse(is.na(global_data$q0134_0008),global_data$q0187_0008,global_data$q0134_0008),global_data$q0080_0008)
global_data$dstigma[is.na(global_data$dstigma)] <- 0
global_data$dtime <- ifelse(is.na(global_data$q0080_0009),ifelse(is.na(global_data$q0134_0009),global_data$q0187_0009,global_data$q0134_0009),global_data$q0080_0009)
global_data$dtime[is.na(global_data$dtime)] <- 0
global_data$dbad <- ifelse(is.na(global_data$q0080_0010),ifelse(is.na(global_data$q0134_0010),global_data$q0187_0010,global_data$q0134_0010),global_data$q0080_0010)
global_data$dbad[is.na(global_data$dbad)] <- 0
global_data$dpressure <- ifelse(is.na(global_data$q0080_0011),ifelse(is.na(global_data$q0134_0011),global_data$q0187_0011,global_data$q0134_0011),global_data$q0080_0011)
global_data$dpressure[is.na(global_data$dpressure)] <- 0
US_data$didk <- ifelse(is.na(US_data$q0080_0012),ifelse(is.na(US_data$q0134_0012),US_data$q0187_0012,US_data$q0134_0012),US_data$q0080_0012)
US_data$didk[is.na(US_data$didk)] <- 0
#looking at q0041: Where would you prefer to get information about hearing health care? Check all that apply. Making it so we pick up yes/no responses
global_data$Q41_1 <- global_data$q0041_0001
global_data$Q41_1[is.na(global_data$Q41_1)] <- 0
#Making Labels for Q41_1 table
tableQ41_1 <- table(global_data$Q41_1,global_data$hcat)
tableQ41_1 <- as.matrix(tableQ41_1)
row.names(tableQ41_1)<-c('Did Not Select','Selected')
colnames(tableQ41_1) <-c('Normal','Mild','Moderate','Severe')
# #BarPlots
# barplot(tableQ41_1, main="Doctor",
#         xlab="Categories of Hearing Loss", col=c("red","blue"),
#         ylim=c(0,1000),
#         ylab = "Number of Participants",
#         legend = rownames(tableQ41_14), beside=TRUE)
#
global_data$Q41_2 <- global_data$q0041_0002
global_data$Q41_2[is.na(global_data$Q41_2)] <- 0
# #Making Labels for Q41_2 table
tableQ41_2 <- table(global_data$Q41_2,global_data$hcat)
tableQ41_2 <- as.matrix(tableQ41_2)
row.names(tableQ41_2)<-c('Did Not Select','Selected')
colnames(tableQ41_2) <-c('Normal','Mild','Moderate','Severe')
# #BarPlots
# barplot(tableQ41_2, main="Pamphlets in Doctor's Office (or other HCP)",
#         xlab="Categories of Hearing Loss", col=c("red","blue"),
#         ylim=c(0,1000),
#         ylab = "Number of Participants",
#         legend = rownames(tableQ41_14), beside=TRUE)
#
#
global_data$Q41_3 <- global_data$q0041_0003
global_data$Q41_3[is.na(global_data$Q41_3)] <- 0
# #Making Labels for Q41_3 table
tableQ41_3 <- table(global_data$Q41_3,global_data$hcat)
tableQ41_3 <- as.matrix(tableQ41_3)
row.names(tableQ41_3)<-c('Did Not Select','Selected')
colnames(tableQ41_3) <-c('Normal','Mild','Moderate','Severe')
# #BarPlot
# barplot(tableQ41_3, main="Radio Ads",
#         xlab="Categories of Hearing Loss", col=c("red","blue"),
#         ylim=c(0,1000),
#         ylab = "Number of Participants",
#         legend = rownames(tableQ41_14), beside=TRUE)
#
global_data$Q41_4 <- global_data$q0041_0004
global_data$Q41_4[is.na(global_data$Q41_4)] <- 0
# #Making Labels for Q41_4 table
tableQ41_4 <- table(global_data$Q41_4,global_data$hcat)
tableQ41_4 <- as.matrix(tableQ41_4)
row.names(tableQ41_4)<-c('Did Not Select','Selected')
colnames(tableQ41_4) <-c('Normal','Mild','Moderate','Severe')
# #BarPlot
# barplot(tableQ41_4, main="Newspaper",
#         xlab="Categories of Hearing Loss", col=c("red","blue"),
#         ylim=c(0,1000),
#         ylab = "Number of Participants",
#         legend = rownames(tableQ41_14), beside=TRUE)
#
global_data$Q41_5 <- global_data$q0041_0005
global_data$Q41_5[is.na(global_data$Q41_5)] <- 0
# #Making Labels for Q41_5 table
tableQ41_5 <- table(global_data$Q41_5,global_data$hcat)
tableQ41_5 <- as.matrix(tableQ41_5)
row.names(tableQ41_5)<-c('Did Not Select','Selected')
colnames(tableQ41_5) <-c('Normal','Mild','Moderate','Severe')
# #BarPlot
# barplot(tableQ41_5, main="Pamphlets that come to you in the mail",
#         xlab="Categories of Hearing Loss", col=c("red","blue"),
#         ylim=c(0,1000),
#         ylab = "Number of Participants",
#         legend = rownames(tableQ41_14), beside=TRUE)
#
global_data$Q41_6 <- global_data$q0041_0006
global_data$Q41_6[is.na(global_data$Q41_6)] <- 0
# #Making Labels for Q41_6 table
tableQ41_6 <- table(global_data$Q41_6,global_data$hcat)
tableQ41_6 <- as.matrix(tableQ41_6)
row.names(tableQ41_6)<-c('Did Not Select','Selected')
colnames(tableQ41_6) <-c('Normal','Mild','Moderate','Severe')
# #BarPlot
# barplot(tableQ41_6, main="TV Ads",
#         xlab="Categories of Hearing Loss", col=c("red","blue"),
#         ylim=c(0,1000),
#         ylab = "Number of Participants",
#         legend = rownames(tableQ41_14), beside=TRUE)
#
global_data$Q41_7 <- global_data$q0041_0007
global_data$Q41_7[is.na(global_data$Q41_7)] <- 0
# #Making Labels for Q41_7 table
tableQ41_7 <- table(global_data$Q41_7,global_data$hcat)
tableQ41_7 <- as.matrix(tableQ41_7)
row.names(tableQ41_7)<-c('Did Not Select','Selected')
colnames(tableQ41_7) <-c('Normal','Mild','Moderate','Severe')
# #BarPlot
# barplot(tableQ41_7, main="University Websites on the Internet",
#         xlab="Categories of Hearing Loss", col=c("red","blue"),
#         ylim=c(0,1000),
#         ylab = "Number of Participants",
#         legend = rownames(tableQ41_14), beside=TRUE)
#
global_data$Q41_8 <- global_data$q0041_0008
global_data$Q41_8[is.na(global_data$Q41_8)] <- 0
# #Making Labels for Q41_8 table
tableQ41_8 <- table(global_data$Q41_8,global_data$hcat)
tableQ41_8 <- as.matrix(tableQ41_8)
row.names(tableQ41_8)<-c('Did Not Select','Selected')
colnames(tableQ41_8) <-c('Normal','Mild','Moderate','Severe')
# #BarPlot
# barplot(tableQ41_8, main="Advertisements on the Internet",
#         xlab="Categories of Hearing Loss", col=c("red","blue"),
#         ylim=c(0,1000),
#         ylab = "Number of Participants",
#         legend = rownames(tableQ41_14), beside=TRUE)
#
global_data$Q41_9 <- global_data$q0041_0009
global_data$Q41_9[is.na(global_data$Q41_9)] <- 0
# #Making Labels for Q41_9 table
tableQ41_9 <- table(global_data$Q41_9,global_data$hcat)
tableQ41_9 <- as.matrix(tableQ41_9)
row.names(tableQ41_9)<-c('Did Not Select','Selected')
colnames(tableQ41_9) <-c('Normal','Mild','Moderate','Severe')
# #BarPlot
# barplot(tableQ41_9, main="Government Websites on the Internet",
#         xlab="Categories of Hearing Loss", col=c("red","blue"),
#         ylim=c(0,1000),
#         ylab = "Number of Participants",
#         legend = rownames(tableQ41_14), beside=TRUE)
#
#
global_data$Q41_10 <- global_data$q0041_0010
global_data$Q41_10[is.na(global_data$Q41_10)] <- 0
# #Making Labels for Q41_10 table
tableQ41_10 <- table(global_data$Q41_10,global_data$hcat)
tableQ41_10 <- as.matrix(tableQ41_10)
row.names(tableQ41_10)<-c('Did Not Select','Selected')
colnames(tableQ41_10) <-c('Normal','Mild','Moderate','Severe')
# #BarPlot
# barplot(tableQ41_10, main="Medical Websites on the Internet",
#         xlab="Categories of Hearing Loss", col=c("red","blue"),
#         ylim=c(0,1000),
#         ylab = "Number of Participants",
#         legend = rownames(tableQ41_14), beside=TRUE)
#
#
global_data$Q41_11 <- global_data$q0041_0011
global_data$Q41_11[is.na(global_data$Q41_11)] <- 0
# #Making Labels for Q41_11 table
tableQ41_11 <- table(global_data$Q41_11,global_data$hcat)
tableQ41_11 <- as.matrix(tableQ41_11)
row.names(tableQ41_11)<-c('Did Not Select','Selected')
colnames(tableQ41_11) <-c('Normal','Mild','Moderate','Severe')
# #BarPlot
# barplot(tableQ41_11, main="Friends and Family",
#         xlab="Categories of Hearing Loss", col=c("red","blue"),
#         ylim=c(0,1000),
#         ylab = "Number of Participants",
#         legend = rownames(tableQ41_14), beside=TRUE)
#
global_data$Q41_12 <- global_data$q0041_0012
global_data$Q41_12[is.na(global_data$Q41_12)] <- 0
# #Making Labels for Q41_12 table
tableQ41_12 <- table(global_data$Q41_12,global_data$hcat)
tableQ41_12 <- as.matrix(tableQ41_12)
row.names(tableQ41_12)<-c('Did Not Select','Selected')
colnames(tableQ41_12) <-c('Normal','Mild','Moderate','Severe')
# #BarPlot
# barplot(tableQ41_12, main="Hearing Loss Associations/Charities",
#         xlab="Categories of Hearing Loss", col=c("red","blue"),
#         ylim=c(0,1000),
#         ylab = "Number of Participants",
#         legend = rownames(tableQ41_14), beside=TRUE)
#
global_data$Q41_13 <- global_data$q0041_0013
global_data$Q41_13[is.na(global_data$Q41_13)] <- 0
# #Making Labels for Q41_13 table
tableQ41_13 <- table(global_data$Q41_13,global_data$hcat)
tableQ41_13 <- as.matrix(tableQ41_13)
row.names(tableQ41_13)<-c('Did Not Select','Selected')
colnames(tableQ41_13) <-c('Normal','Mild','Moderate','Severe')
# #BarPlot
# barplot(tableQ41_13, main="Advertisements in Public Places",
#         xlab="Categories of Hearing Loss", col=c("red","blue"),
#         ylim=c(0,1000),
#         ylab = "Number of Participants",
#         legend = rownames(tableQ41_14), beside=TRUE)
#
global_data$Q41_14 <- global_data$q0041_0014
global_data$Q41_14[is.na(global_data$Q41_14)] <- 0
# #Making Labels for Q41_14 table
tableQ41_14 <- table(global_data$Q41_14,global_data$hcat)
tableQ41_14 <- as.matrix(tableQ41_14)
row.names(tableQ41_14)<-c('Did Not Select','Selected')
colnames(tableQ41_14) <-c('Normal','Mild','Moderate','Severe')
#Reference Example For Barplot
global_data$Q41_14 <- global_data$q0041_0014
global_data$Q41_14[is.na(global_data$Q41_14)] <- 0
#Making Labels for Q41_14 table
tableQ41_14 <- table(global_data$Q41_14,global_data$hcat)
tableQ41_14 <- as.matrix(tableQ41_14)
row.names(tableQ41_14)<-c('Did Not Select','Selected')
colnames(tableQ41_14) <-c('Normal','Mild','Moderate','Severe')
#BarPlot
barplot(tableQ41_14, main="Public Libraries",
xlab="Categories of Hearing Loss", col=c("red","blue"),
ylim=c(0,1000),
ylab = "Number of Participants",
legend = rownames(tableQ41_14), beside=TRUE)
#OBJ rename table columns and row.
#1. Assign table a name ("test)
test<-table(global_data$dpressure,global_data$hcat)
#2. Save "test" as a matrix (as.matrix(test))
test <- as.matrix(test)
#3. Select and assign row names
row.names(test)<-c('no','yes')
#4. Select and assign column names
colnames(test) <-c('normal','mild','mod','severe')
#5 Type "test" or grid.table(test) and it should all come together
grid.table(test)
test<-table(global_data$dpressure,global_data$hcat)
test <- as.matrix(test)
row.names(test)<-c('Did Not Select','Selected')
colnames(test) <-c('Normal','Mild','Moderate','Severe')
# Sorting Q41
Q41 <- as.data.frame(table(global_data$Q41_1)[2])
Q41[2] <- table(global_data$Q41_2)[2]
#Sum of Responses (or responses per person)
global_1$q0041_0001
global_data$q0041 <- rowSums(global_data[92:105],na.rm=TRUE)
test <- table(global_data$q0041)
addmargins(test)
test <- table(global_data$BEPTA)
addmargins(test)
UK_RN_data<- read.spss("C:/Users/mkeomec/Documents/dropbox/Dropbox/Work/UW BandBlab/Studies/eHearing/U.K. eHearing Study - Online Panel Survey.sav", to.data.frame=TRUE, use.value.labels=FALSE)
UK_RN_data<- read.spss("C:/Users/mkeomec/Documents/dropbox/eHearing manuscript/U.K. eHearing Study - Online Panel Survey.sav", to.data.frame=TRUE, use.value.labels=FALSE)
UK_RN_data<- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/U.K. eHearing Study - Online Panel Survey.sav", to.data.frame=TRUE, use.value.labels=FALSE)
#UK_state_RN_data <- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/UK England Online.sav", to.data.frame=TRUE,use.value.labels=FALSE)
UK_state_RN_data <- read.spss("D:/Dropbox/eHearing manuscript/UK England Online.sav", to.data.frame=TRUE,use.value.labels=FALSE)
UK_state_RN_data <- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/UK England Online.sav", to.data.frame=TRUE,use.value.labels=FALSE)
London_RN_data <- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/UK London Online.sav", to.data.frame=TRUE,use.value.labels=FALSE)
AUS_RN_data
AUS_RN_data <- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/eHearing Study-Australia-Panel.sav", to.data.frame=TRUE,use.value.labels=FALSE)
AUS_state_RN_data <- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/eHearing Study - NSW - Panel.sav", to.data.frame=TRUE,use.value.labels=FALSE)
#Ontario- Target 2000 respondents. Info on Toronto or other areas of Ontario
# Dataset omits location
CAN_RN_data<- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/eHearing Study - CanadaPanel.sav", to.data.frame=TRUE,use.value.labels=FALSE)
UK_RN_data<- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/U.K. eHearing Study - Online Panel Survey.sav", to.data.frame=TRUE, use.value.labels=FALSE)
#UK_RN_data<- read.spss("D:/Dropbox/eHearing manuscript/U.K. eHearing Study - Online Panel Survey.sav", to.data.frame=TRUE, use.value.labels=FALSE)
test <- attr(UK_RN_data$q0001,'value.labels')
UK_RN_data$q0001 <- names(test)[UK_RN_data$q0001]
UK_RN_data$country_id <- 'UK'
UK_RN_data$region_id <- UK_RN_data$q0001
UK_state_RN_data <- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/UK England Online.sav", to.data.frame=TRUE,use.value.labels=FALSE)
#UK_state_RN_data <- read.spss("D:/Dropbox/eHearing manuscript/UK England Online.sav", to.data.frame=TRUE,use.value.labels=FALSE)
test <- attr(UK_state_RN_data$q0001,'value.labels')
UK_state_RN_data$q0001 <- names(test)[UK_state_RN_data$q0001]
UK_state_RN_data$country_id <- 'UK'
UK_state_RN_data$region_id <- 'England'
UK_state_RN_data$state_id <- UK_state_RN_data$q0001
London_RN_data <- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/UK London Online.sav", to.data.frame=TRUE,use.value.labels=FALSE)
#London_RN_data <- read.spss("D:/Dropbox/eHearing manuscript/UK London Online.sav", to.data.frame=TRUE,use.value.labels=FALSE)
test <- attr(London_RN_data$q0001,'value.labels')
London_RN_data$q0001 <- names(test)[London_RN_data$q0001]
London_RN_data$country_id <- 'UK'
UK_state_RN_data$region_id <- 'England'
London_RN_data$city_id <-London_RN_data$q0001
AUS_RN_data <- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/eHearing Study-Australia-Panel.sav", to.data.frame=TRUE,use.value.labels=FALSE)
#AUS_RN_data <- read.spss("D:/Dropbox/eHearing manuscript/eHearing Study-Australia-Panel.sav", to.data.frame=TRUE,use.value.labels=FALSE)
test <- attr(AUS_RN_data$q0001,'value.labels')
AUS_RN_data$q0001 <- names(test)[AUS_RN_data$q0001]
AUS_RN_data$country_id <- 'AUS'
AUS_RN_data$state_id <- AUS_RN_data$q0001
AUS_state_RN_data <- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/eHearing Study - NSW - Panel.sav", to.data.frame=TRUE,use.value.labels=FALSE)
# AUS_state_RN_data <- read.spss("D:/Dropbox/eHearing manuscript/eHearing Study - NSW - Panel.sav", to.data.frame=TRUE,use.value.labels=FALSE)
test <- attr(AUS_state_RN_data$q0001,'value.labels')
AUS_state_RN_data$q0001 <- names(test)[AUS_state_RN_data$q0001]
AUS_state_RN_data$country_id <- 'AUS'
AUS_state_RN_data$state_id <- 'NSW'
AUS_state_RN_data$city_id <- AUS_state_RN_data$q0001
AUS_state_RN_data$city_id[which(AUS_state_RN_data$city_id=='All other')] <- 'Other AUS NSW'
#Ontario- Target 2000 respondents. Info on Toronto or other areas of Ontario
# Dataset omits location
CAN_RN_data<- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/eHearing Study - CanadaPanel.sav", to.data.frame=TRUE,use.value.labels=FALSE)
#CAN_RN_data<- read.spss("D:/Dropbox/eHearing manuscript/eHearing Study - CanadaPanel.sav", to.data.frame=TRUE,use.value.labels=FALSE)
CAN_RN_data$q0001_new <- NA
CAN_RN_data <- CAN_RN_data[,c(1:10,1522,11:1521)]
names(CAN_RN_data) <- names(AUS_state_RN_data[1:1522])
CAN_RN_data$country_id <- 'CAN'
CAN_RN_data$state_id <- 'Ontario'
CAN_state_RN_data<- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/eHearing Study of Alberta_BC_Quebec_Other_Canada_Panel - 2.sav", to.data.frame=TRUE,use.value.labels=FALSE)
#CAN_state_RN_data<- read.spss("D:/Dropbox/eHearing manuscript/eHearing Study of Alberta_BC_Quebec_Other_Canada_Panel - 2.sav", to.data.frame=TRUE,use.value.labels=FALSE)
test <- attr(CAN_state_RN_data$q0001,'value.labels')
CAN_state_RN_data$q0001 <- names(test)[CAN_state_RN_data$q0001]
names(CAN_state_RN_data) <- names(AUS_state_RN_data[1:1522])
CAN_state_RN_data$country_id <- 'CAN'
CAN_state_RN_data$state_id <- CAN_state_RN_data$q0001
CAN_state_RN_data$state_id[which(CAN_state_RN_data$state_id=='Other')] <- 'Other CAN'
# Dataset omits location
US_RN_data <- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/eHearing Study - USA - Panel.sav", to.data.frame=TRUE,use.value.labels=FALSE)
#US_RN_data <- read.spss("D:/Dropbox/eHearing manuscript/eHearing Study - USA - Panel.sav", to.data.frame=TRUE,use.value.labels=FALSE)
US_RN_data$q0001_new <- NA
US_RN_data <- US_RN_data[,c(1:10,1522,11:1521)]
names(US_RN_data) <- names(CAN_state_RN_data[1:1522])
US_RN_data$country_id <- 'US'
# Dataset omits location
US_state_RN_data <- read.spss("C:/Users/mkeomec/Dropbox/eHearing manuscript/eHearing Study - USA WA - Panel.sav", to.data.frame=TRUE,use.value.labels=FALSE)
#US_state_RN_data <- read.spss("D:/Dropbox/eHearing manuscript/eHearing Study - USA WA - Panel.sav", to.data.frame=TRUE,use.value.labels=FALSE)
US_state_RN_data$q0001_new <- NA
US_state_RN_data <- US_state_RN_data[,c(1:10,1523,11:1522)]
#q0003  in "USA WA" Research now dataset is are you a current resident of WA. Remove this Question
US_state_RN_data <- US_state_RN_data[-13]
names(US_state_RN_data) <- names(CAN_state_RN_data[1:1522])
US_state_RN_data$country_id <- 'US'
US_state_RN_data$state_id <- 'WA'
all_RN_data <- rbind.fill(UK_RN_data,UK_state_RN_data)
all_RN_data <- rbind.fill(all_RN_data,London_RN_data)
all_RN_data <- rbind.fill(all_RN_data,AUS_RN_data)
all_RN_data <- rbind.fill(all_RN_data,AUS_state_RN_data)
all_RN_data <- rbind.fill(all_RN_data,CAN_RN_data)
all_RN_data <- rbind.fill(all_RN_data,CAN_state_RN_data)
all_RN_data <- rbind.fill(all_RN_data,US_RN_data)
all_RN_data <- rbind.fill(all_RN_data,US_state_RN_data)
#Remove subjects under 60 years old
all_RN_data <- all_RN_data[!(all_RN_data$q0003==1),]
all_RN_data <- rbind.fill(UK_RN_data,UK_state_RN_data)
all_RN_data <- rbind.fill(all_RN_data,London_RN_data)
all_RN_data <- rbind.fill(all_RN_data,AUS_RN_data)
all_RN_data <- rbind.fill(all_RN_data,AUS_state_RN_data)
all_RN_data <- rbind.fill(all_RN_data,CAN_RN_data)
all_RN_data <- rbind.fill(all_RN_data,CAN_state_RN_data)
all_RN_data <- rbind.fill(all_RN_data,US_RN_data)
all_RN_data <- rbind.fill(all_RN_data,US_state_RN_data)
all_RN_data <- all_RN_data[!(all_RN_data$q0003==1),]
all_RN_data$q0041 <- rowSums(all_RN_data[92:105],na.rm=TRUE)
test <- table(all_RN_data$q0041)
addmargins(test)
test <- table(all_RN_data$q0046)
addmargins(test)
View(all_RN_data)
colnames(all_RN_data[92])
colnames(all_RN_data[92:105])
global_data$q0041 <- rowSums(global_data[92:105],na.rm=TRUE)
test <- table(global_data$q0041)
addmargins(test)
test <- table(all_RN_data$q0003)
addmargins(test)
test <- table(all_RN_data$q0002)
addmargins(test)
global_data <- rbind.fill(AUS_data,CAN_data)
global_data <- rbind.fill(global_data,UK_data)
global_data <- rbind.fill(global_data,US_data)
ifelse(global_data$q0054=="#NULL!",ifelse(global_data$q0104=="#NULL!",global_data$provider <- global_data$q0157,global_data$provider <- global_data$q0104),global_data$provider <- global_data$q0054)
global_data$q0041 <- rowSums(global_data[92:105],na.rm=TRUE)
test <- table(global_data$q0041)
addmargins(test)
test <- table(global_data$q0002)
addmargins(test)
test <- table(global_data$q0003)
test
test <- table(all_RN_data$q0003)
test
addmargins(test)
test <- table(global_data$q0003)
addmargins(test)
all_RN_data <- rbind.fill(UK_RN_data,UK_state_RN_data)
all_RN_data <- rbind.fill(all_RN_data,London_RN_data)
all_RN_data <- rbind.fill(all_RN_data,AUS_RN_data)
all_RN_data <- rbind.fill(all_RN_data,AUS_state_RN_data)
all_RN_data <- rbind.fill(all_RN_data,CAN_RN_data)
all_RN_data <- rbind.fill(all_RN_data,CAN_state_RN_data)
all_RN_data <- rbind.fill(all_RN_data,US_RN_data)
all_RN_data <- rbind.fill(all_RN_data,US_state_RN_data)
test <- table(all_RN_data$q0002)
addmargins(test)
test <- table(all_RN_data$q0003)
addmargins(test)
global_data$q0041 <- rowSums(global_data[92:105],na.rm=TRUE)
test <- table(global_data$q0041)
addmargins(test)
all_RN_data$q0041 <- rowSums(all_RN_data[92:105],na.rm=TRUE)
test <- table(all_RN_data$q0041)
addmargins(test)
test <- table(global_data$q0041,global_data$q0002)
addmargins(test)
test <- table(all_RN_data$q0041,global_data$q0002)
test <- table(all_RN_data$q0041,all_RN_data$q0002)
addmargins(test)
all_RN_data$q0041 <- rowSums(all_RN_data[92:105],na.rm=TRUE)
test <- table(all_RN_data$q0041)
addmargins(test)
8050-1752
#Remove subjects under 60 years old
all_RN_data <- all_RN_data[!(all_RN_data$q0003==1),]
all_RN_data$q0041 <- rowSums(all_RN_data[92:105],na.rm=TRUE)
test <- table(all_RN_data$q0041,all_RN_data$q0002)
addmargins(test)
3563-550
7585-1343
3013/6242
global_data$q0041 <- rowSums(global_data[92:105],na.rm=TRUE)
test <- table(global_data$q0041,global_data$q0002)
addmargins(test)
1004-6
998-1911
998/1911
test <- table(all_RN_data$q0041,all_RN_data$q0002)
addmargins(test)
4022-783
4022-793
test <- table(global_data$q0041,global_data$q0002)
addmargins(test)
